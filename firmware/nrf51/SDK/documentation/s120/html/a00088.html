<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF51 SDK - S120 SoftDevice: BLE S120 Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF51 SDK - S120 SoftDevice
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00088.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">BLE S120 Functions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#nrf51_sd_power_off">0x34 - sd_power_system_off</a><ul><li class="level2"><a href="#nrf41_nrf51_sd_power_off_sec_function_req">Function packet format.</a></li>
<li class="level2"><a href="#nrf41_nrf51_sd_power_off_sec_function_resp">Response packet format</a></li>
</ul>
</li>
<li class="level1"><a href="#nrf51_sd_temp_get">0x52 - sd_temp_get</a><ul><li class="level2"><a href="#nrf41_nrf51_sd_temp_get_sec_function_req">Function packet format.</a></li>
<li class="level2"><a href="#nrf51_sd_temp_get_sub">Response packet format</a></li>
</ul>
</li>
<li class="level1"><a href="#nrf51_enable_encoding">0x60 - sd_ble_enable</a><ul><li class="level2"><a href="#nrf51_enable_sec_a">Function packet format</a></li>
<li class="level2"><a href="#nrf51_enable_sec_b">Response packet format</a></li>
</ul>
</li>
<li class="level1"><a href="#nrf51_tx_buffer_count_get_encoding">0x62 - sd_ble_tx_buffer_count_get</a><ul><li class="level2"><a href="#nrf51_tx_buffer_count_get_sec_function">Function packet format</a></li>
<li class="level2"><a href="#nrf51_tx_buffer_count_sub">Response packet format</a></li>
</ul>
</li>
<li class="level1"><a href="#nrf51_uuid_vs_add_encoding">0x63 - sd_ble_uuid_vs_add</a><ul><li class="level2"><a href="#nrf51_uuid_vs_add_sec_a">Function packet format</a></li>
<li class="level2"><a href="#nrf51_uuid_vs_add_sec_b">Response packet format</a></li>
</ul>
</li>
<li class="level1"><a href="#nrf51_uuid_decode_encoding">0x64 - sd_ble_uuid_decode</a><ul><li class="level2"><a href="#nrf51_uuid_decode_sec_a">Function packet format</a></li>
<li class="level2"><a href="#nrf51_uuid_decode_sec_b">Response packet format</a></li>
</ul>
</li>
<li class="level1"><a href="#nrf51_uuid_encode_encoding">0x65 - sd_ble_uuid_encode</a><ul><li class="level2"><a href="#nrf51_uuid_encode_sec_a">Function packet format</a></li>
<li class="level2"><a href="#nrf51_uuid_encode_sec_b">Response packet format</a></li>
</ul>
</li>
<li class="level1"><a href="#nrf51_version_get_encoding">0x66 - sd_ble_version_get</a><ul><li class="level2"><a href="#nrf51_version_get_sec_a">Function packet format</a></li>
<li class="level2"><a href="#nrf51_version_get_sec_b">Response packet format</a></li>
</ul>
</li>
<li class="level1"><a href="#nrf51_user_mem_reply_encoding">0x67 - sd_ble_user_mem_reply</a><ul><li class="level2"><a href="#nrf51_user_mem_reply_sec_a">Function packet format</a></li>
<li class="level2"><a href="#nrf51_mem_reply_sec_b">Response packet format</a></li>
</ul>
</li>
<li class="level1"><a href="#nrf51_opt_set_encoding">0x68 - sd_ble_opt_set</a><ul><li class="level2"><a href="#nrf51_opt_set_sec_a">Function packet format</a></li>
<li class="level2"><a href="#nrf51_opt_set_sec_b">Encoding of BLE Option</a></li>
<li class="level2"><a href="#nrf51_opt_set_sec_c">Response packet format</a></li>
</ul>
</li>
<li class="level1"><a href="#nrf51_opt_get_encoding">0x69 - sd_ble_opt_get</a><ul><li class="level2"><a href="#nrf51_opt_get_sec_a">Function packet format</a></li>
<li class="level2"><a href="#nrf51_opt_get_sec_b">Response packet format</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="nrf51_sd_power_off"></a>
0x34 - sd_power_system_off</h1>
<h2><a class="anchor" id="nrf41_nrf51_sd_power_off_sec_function_req"></a>
Function packet format.</h2>
<p>Frame format encoding of the <a class="el" href="a00964.html#ga774947ee0e200456ea3aec3fc7f8bd6b">sd_power_system_off</a> packet.</p>
<p>The parameters are encoded in the following order:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x34 </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="system_power_off.png" alt="system_power_off.png"/>
<div class="caption">
Figure 1: Packet format for sd_system_power_off function.</div></div>
<p> <br/>
</p>
<h2><a class="anchor" id="nrf41_nrf51_sd_power_off_sec_function_resp"></a>
Response packet format</h2>
<p>There is no response for this command. <br/>
</p>
<h1><a class="anchor" id="nrf51_sd_temp_get"></a>
0x52 - sd_temp_get</h1>
<h2><a class="anchor" id="nrf41_nrf51_sd_temp_get_sec_function_req"></a>
Function packet format.</h2>
<p>Frame format encoding of the <a class="el" href="a00964.html#gade0ea69f513ff1feab2c4f6e1c393313">sd_temp_get</a> packet.</p>
<p>The parameters are encoded in the following order:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x52 </td></tr>
<tr>
<td>1 byte </td><td>Temperature Present </td><td>0x00 - not present, 0x01 - present </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="temp_get.png" alt="temp_get.png"/>
<div class="caption">
Figure 1: Packet format for sd_temp_get function.</div></div>
<p> <br/>
</p>
<h2><a class="anchor" id="nrf51_sd_temp_get_sub"></a>
Response packet format</h2>
<p>Frame format encoding of the <a class="el" href="a00964.html#gade0ea69f513ff1feab2c4f6e1c393313">sd_temp_get</a> response packet:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x52 </td></tr>
<tr>
<td>4 bytes </td><td>nRF Error Code </td><td>See <a class="el" href="a00964.html#gade0ea69f513ff1feab2c4f6e1c393313">sd_temp_get</a> </td></tr>
<tr>
<td>4 bytes </td><td>Measured Temperature Value </td><td>See <a class="el" href="a00964.html#gade0ea69f513ff1feab2c4f6e1c393313">sd_temp_get</a> </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="temp_get_response.png" alt="temp_get_response.png"/>
<div class="caption">
Figure 2: Packet format for sd_temp_get response.</div></div>
<p> <br/>
</p>
<h1><a class="anchor" id="nrf51_enable_encoding"></a>
0x60 - sd_ble_enable</h1>
<h2><a class="anchor" id="nrf51_enable_sec_a"></a>
Function packet format</h2>
<p>Frame format encoding of the <a class="el" href="a00932.html#ga0f632bec36100e4d2d74672ccbb4218b">sd_ble_enable</a> packet.</p>
<p>The parameters are encoded in the following order:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x60, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>1 byte </td><td>Enable Params Present </td><td>0x00 - not present, 0x01 - present </td></tr>
<tr>
<td>2 bytes </td><td>Conditional: Enable Params </td><td>See <a class="el" href="a00126.html">ble_enable_params_t</a> </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="ble_enable_packet_s120.png" alt="ble_enable_packet_s120.png"/>
<div class="caption">
Figure 1: Packet format for sd_ble_enable function.</div></div>
<p> <br/>
</p>
<h2><a class="anchor" id="nrf51_enable_sec_b"></a>
Response packet format</h2>
<p>Frame format encoding of the <a class="el" href="a00932.html#ga0f632bec36100e4d2d74672ccbb4218b">sd_ble_enable</a> response packet:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x60, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>4 bytes </td><td>nRF Error Code </td><td>See <a class="el" href="a00932.html#ga0f632bec36100e4d2d74672ccbb4218b">sd_ble_enable</a> </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="default_response_packet_generic.png" alt="default_response_packet_generic.png"/>
<div class="caption">
Figure 2: Packet format for sd_ble_enabale response.</div></div>
<p> <br/>
</p>
<h1><a class="anchor" id="nrf51_tx_buffer_count_get_encoding"></a>
0x62 - sd_ble_tx_buffer_count_get</h1>
<h2><a class="anchor" id="nrf51_tx_buffer_count_get_sec_function"></a>
Function packet format</h2>
<p>Frame format encoding of the <a class="el" href="a00932.html#ga37e443c585217475a97e40dfb443a1b6">sd_ble_tx_buffer_count_get</a> packet.</p>
<p>The parameters are encoded in the following order:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x62, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>1 byte </td><td>Tx Buffer Count Present </td><td>0x00 - not present, 0x01 - present </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="tx_buffer_count_get_packet.png" alt="tx_buffer_count_get_packet.png"/>
<div class="caption">
Figure 1: Packet format for sd_ble_tx_buffer_count_get function.</div></div>
<p> <br/>
</p>
<h2><a class="anchor" id="nrf51_tx_buffer_count_sub"></a>
Response packet format</h2>
<p>If a command was executed successfully, so that <code>'nRF Error Code' = <a class="el" href="a00745.html#ga7e6367efeaac363d8cf024940b4ec123">NRF_SUCCESS</a></code>, the nRF Error Code is followed by conditional data.</p>
<p>Frame format encoding of the <a class="el" href="a00932.html#ga37e443c585217475a97e40dfb443a1b6">sd_ble_tx_buffer_count_get</a> response packet:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x62, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>4 bytes </td><td>nRF Error Code </td><td>See <a class="el" href="a00932.html#ga37e443c585217475a97e40dfb443a1b6">sd_ble_tx_buffer_count_get</a> </td></tr>
<tr>
<td>1 byte </td><td>Conditional: Tx Buffer Count Present </td><td>0x00 - not present, 0x01 - present </td></tr>
<tr>
<td>1 byte </td><td>Conditional: Tx Buffer Count </td><td>See <a class="el" href="a00932.html#ga37e443c585217475a97e40dfb443a1b6">sd_ble_tx_buffer_count_get</a> </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="tx_buffer_count_get_response.png" alt="tx_buffer_count_get_response.png"/>
<div class="caption">
Figure 2: Packet format for sd_ble_tx_buffer_count_get function response.</div></div>
<p> <br/>
</p>
<h1><a class="anchor" id="nrf51_uuid_vs_add_encoding"></a>
0x63 - sd_ble_uuid_vs_add</h1>
<h2><a class="anchor" id="nrf51_uuid_vs_add_sec_a"></a>
Function packet format</h2>
<p>Frame format encoding of the <a class="el" href="a00932.html#ga265b4251110a15120d0aa97e5152163b">sd_ble_uuid_vs_add</a> packet.</p>
<p>The parameters are encoded in the following order:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x63, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>1 byte </td><td>UUID Present </td><td>0x00 - not present, 0x01 - present </td></tr>
<tr>
<td>16 bytes </td><td>Conditional: Vendor Specific UUID </td><td>See <a class="el" href="a00228.html">ble_uuid128_t</a> </td></tr>
<tr>
<td>1 byte </td><td>UUID type Present </td><td>0x00 - not present, 0x01 - present </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="uuid_vs_add_packet.png" alt="uuid_vs_add_packet.png"/>
<div class="caption">
Figure 1: Packet format for sd_ble_uuid_vs_add function.</div></div>
<p> <br/>
</p>
<h2><a class="anchor" id="nrf51_uuid_vs_add_sec_b"></a>
Response packet format</h2>
<p>If a command was executed successfully, so that <code>'nRF Error Code' = <a class="el" href="a00745.html#ga7e6367efeaac363d8cf024940b4ec123">NRF_SUCCESS</a></code>, the nRF Error Code is followed by conditional data.</p>
<p>Frame format encoding of the <a class="el" href="a00932.html#ga265b4251110a15120d0aa97e5152163b">sd_ble_uuid_vs_add</a> response packet:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x63, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>4 bytes </td><td>nRF Error Code </td><td>See <a class="el" href="a00932.html#ga265b4251110a15120d0aa97e5152163b">sd_ble_uuid_vs_add</a> </td></tr>
<tr>
<td>1 byte </td><td>UUID Type Present </td><td>0x00 - not present, 0x01 - present </td></tr>
<tr>
<td>1 byte </td><td>Conditional: UUID Type </td><td>Index to Vendor Specific UUID </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="uuid_vs_add_response.png" alt="uuid_vs_add_response.png"/>
<div class="caption">
Figure 2: Packet format for sd_ble_uuid_vs_add response.</div></div>
<p> <br/>
</p>
<h1><a class="anchor" id="nrf51_uuid_decode_encoding"></a>
0x64 - sd_ble_uuid_decode</h1>
<h2><a class="anchor" id="nrf51_uuid_decode_sec_a"></a>
Function packet format</h2>
<p>Frame format encoding of the <a class="el" href="a00932.html#ga53a62e0d6e8604b73c937f89424b89ba">sd_ble_uuid_decode</a> packet.</p>
<p>The parameters are encoded in the following order:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x64, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>1 byte </td><td>Length of Raw UUID </td><td>Shall be 2 or 16 bytes </td></tr>
<tr>
<td>1 byte </td><td>Raw UUID Present </td><td>0x00 - not present, 0x01 - present </td></tr>
<tr>
<td>2 or 16 bytes </td><td>Raw UUID </td><td>Raw UUID to be decoded </td></tr>
<tr>
<td>1 byte </td><td>UUID Result Struct Present </td><td>0x00 - not present, 0x01 - present </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="uuid_decode_packet.png" alt="uuid_decode_packet.png"/>
<div class="caption">
Figure 1: Packet format for sd_ble_uuid_decode request function.</div></div>
<p> <br/>
</p>
<h2><a class="anchor" id="nrf51_uuid_decode_sec_b"></a>
Response packet format</h2>
<p>If a command was executed successfully, so that <code>'nRF Error Code' = <a class="el" href="a00745.html#ga7e6367efeaac363d8cf024940b4ec123">NRF_SUCCESS</a></code>, the nRF Error Code is followed by conditional data.</p>
<p>Frame format encoding of the <a class="el" href="a00932.html#ga53a62e0d6e8604b73c937f89424b89ba">sd_ble_uuid_decode</a> response packet:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x64, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>4 bytes </td><td>nRF Error Code </td><td>See <a class="el" href="a00932.html#ga53a62e0d6e8604b73c937f89424b89ba">sd_ble_uuid_decode</a> </td></tr>
<tr>
<td>1 byte </td><td>Conditional: <a class="el" href="a00229.html">ble_uuid_t</a> Present</td><td>0x00 - not present, 0x01 - present </td></tr>
<tr>
<td>3 bytes </td><td>Conditional: Encoded UUID </td><td>Raw UUID decoded to <a class="el" href="a00229.html">ble_uuid_t</a> </td></tr>
</table>
<p><br/>
</p>
<p><a class="el" href="a00229.html">ble_uuid_t</a> is encoded in the following order:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>2 bytes </td><td>UUID </td><td>UUID Value </td></tr>
<tr>
<td>1 byte </td><td>Type </td><td>UUID Type </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="uuid_decode_response.png" alt="uuid_decode_response.png"/>
<div class="caption">
Figure 2: Packet format for sd_ble_uuid_decode response.</div></div>
<p><br/>
</p>
<h1><a class="anchor" id="nrf51_uuid_encode_encoding"></a>
0x65 - sd_ble_uuid_encode</h1>
<h2><a class="anchor" id="nrf51_uuid_encode_sec_a"></a>
Function packet format</h2>
<p>Frame format encoding of the <a class="el" href="a00932.html#ga2e55f7d7e631d072c24f2d6bc0860cc8">sd_ble_uuid_encode</a> packet.</p>
<p>The parameters are encoded in the following order:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x65, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>1 byte </td><td>UUID Present </td><td>0x00 - not present, 0x01 - present </td></tr>
<tr>
<td>3 bytes </td><td>Conditional: UUID </td><td>See <a class="el" href="a00229.html">ble_uuid_t</a> </td></tr>
<tr>
<td>1 byte </td><td>Length Present </td><td>0x00 - not present, 0x01 - present </td></tr>
<tr>
<td>1 byte </td><td>UUID Result Buffer Present </td><td>0x00 - not present, 0x01 - present </td></tr>
</table>
<p><br/>
</p>
<p>As can also be seen inside <b>Figure 1</b>, the 3 bytes inside <a class="el" href="a00229.html">ble_uuid_t</a> are encoded as:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>2 bytes </td><td>UUID </td><td>UUID Value </td></tr>
<tr>
<td>1 byte </td><td>Type </td><td>UUID Type </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="uuid_encode_packet.png" alt="uuid_encode_packet.png"/>
<div class="caption">
Figure 1: Packet format for sd_ble_uuid_encode function.</div></div>
<p> <br/>
</p>
<h2><a class="anchor" id="nrf51_uuid_encode_sec_b"></a>
Response packet format</h2>
<p>If a command was executed successfully, so that <code>'nRF Error Code' = <a class="el" href="a00745.html#ga7e6367efeaac363d8cf024940b4ec123">NRF_SUCCESS</a></code>, the nRF Error Code is followed by conditional data.</p>
<p>Frame format encoding of the <a class="el" href="a00932.html#ga2e55f7d7e631d072c24f2d6bc0860cc8">sd_ble_uuid_encode</a> response packet:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x65, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>4 bytes </td><td>nRF Error Code </td><td>See <a class="el" href="a00932.html#ga2e55f7d7e631d072c24f2d6bc0860cc8">sd_ble_uuid_encode</a> </td></tr>
<tr>
<td>1 byte </td><td>Conditional: Length of encoded UUID </td><td>2 or 16 </td></tr>
<tr>
<td>2 or 16 bytes </td><td>Conditional: Encoded UUID </td><td>UUID value </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="uuid_encode_response.png" alt="uuid_encode_response.png"/>
<div class="caption">
Figure 2: Packet format for sd_ble_uuid_encode response.</div></div>
<p> <br/>
</p>
<h1><a class="anchor" id="nrf51_version_get_encoding"></a>
0x66 - sd_ble_version_get</h1>
<h2><a class="anchor" id="nrf51_version_get_sec_a"></a>
Function packet format</h2>
<p>Frame format encoding of the <a class="el" href="a00932.html#gab3ba7bb07fa809e8dccfd27cbba0210a">sd_ble_version_get</a> packet.</p>
<p>The parameters are encoded in the following order:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x66, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>1 byte </td><td>Version Present </td><td>0x00 - not present, 0x01 - present </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="version_get_packet.png" alt="version_get_packet.png"/>
<div class="caption">
Figure 1: Packet format for sd_ble_version_get function.</div></div>
<p> <br/>
</p>
<h2><a class="anchor" id="nrf51_version_get_sec_b"></a>
Response packet format</h2>
<p>If a command was executed successfully, so that <code>'nRF Error Code' = <a class="el" href="a00745.html#ga7e6367efeaac363d8cf024940b4ec123">NRF_SUCCESS</a></code>, the nRF Error Code is followed by conditional data.</p>
<p>Frame format encoding of the <a class="el" href="a00932.html#gab3ba7bb07fa809e8dccfd27cbba0210a">sd_ble_version_get</a> response packet:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x66, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>4 bytes </td><td>nRF Error Code </td><td>See <a class="el" href="a00932.html#gab3ba7bb07fa809e8dccfd27cbba0210a">sd_ble_version_get</a> </td></tr>
<tr>
<td>1 byte </td><td>Conditional: Version Number </td><td>See <a class="el" href="a00230.html#af18ca1a9b3d80b05042d9121e9d3c9ed">ble_version_t::version_number</a> </td></tr>
<tr>
<td>2 bytes </td><td>Conditional: Company ID </td><td>See <a class="el" href="a00230.html#a39ff6a37dbb096bf608d850d0845d252">ble_version_t::company_id</a> </td></tr>
<tr>
<td>2 bytes </td><td>Conditional: Subversion Number </td><td>See <a class="el" href="a00230.html#abd81a16510bfbcf3778af4daab021369">ble_version_t::subversion_number</a> </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="version_get_response.png" alt="version_get_response.png"/>
<div class="caption">
Figure 2: Packet format for sd_ble_version_get response.</div></div>
<p> <br/>
</p>
<h1><a class="anchor" id="nrf51_user_mem_reply_encoding"></a>
0x67 - sd_ble_user_mem_reply</h1>
<h2><a class="anchor" id="nrf51_user_mem_reply_sec_a"></a>
Function packet format</h2>
<p>Frame format encoding of the <a class="el" href="a00932.html#ga6d49592ed6722290fee71419be7dac1f">sd_ble_user_mem_reply</a> packet.</p>
<p>The parameters are encoded in the following order:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x67, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>2 bytes </td><td>Connection Handle </td><td>Handle value </td></tr>
<tr>
<td>1 byte </td><td>Memory Block Structure Present </td><td>0x00 - not present, 0x01 - present </td></tr>
<tr>
<td>2 bytes </td><td>Conditional: Length </td><td>Length of memory block, see <a class="el" href="a00227.html#a14ab9ae8747f2add25b332c15d20647e">ble_user_mem_block_t::len</a> </td></tr>
<tr>
<td>1 byte </td><td>Conditional: Memory Block Present </td><td>0x00 - not present, 0x01 - present </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="user_mem_reply_packet.png" alt="user_mem_reply_packet.png"/>
<div class="caption">
Figure 1: Packet format for sd_ble_user_mem_reply function.</div></div>
<p> <br/>
 </p>
<dl class="section note"><dt>Note</dt><dd>When <a class="el" href="a00932.html#ga6d49592ed6722290fee71419be7dac1f">sd_ble_user_mem_reply</a> is called, a user memory context is created using <a class="el" href="a00831.html#gaf99f194fe48323eb61a036fd8e5f85fd">app_ble_user_mem_context_create</a> and <a class="el" href="a00861.html#ga032c006bfd620cf871b077846368b242">conn_ble_user_mem_context_create</a>. This context corresponds to a single connection indicated by the connection handle. The context is used to synchronize the user memory block between Connectivity and Application processor. It is released using <a class="el" href="a00831.html#ga69af3edd625767426c7a6f54801f3904">app_ble_user_mem_context_destroy</a> and <a class="el" href="a00861.html#ga069ba9bebfbabf0dd2df28a7c1172c38">conn_ble_user_mem_context_destroy</a> when <a class="el" href="a00929.html#ggaa55e423bfea45f03764a636f2cec7a8ba7bbd162727156bd112cc471f8f9c8dea">BLE_EVT_USER_MEM_RELEASE</a> is received.</dd></dl>
<h2><a class="anchor" id="nrf51_mem_reply_sec_b"></a>
Response packet format</h2>
<p>If a command was executed successfully, so that <code>'nRF Error Code' = <a class="el" href="a00745.html#ga7e6367efeaac363d8cf024940b4ec123">NRF_SUCCESS</a></code>, the nRF Error Code is followed by conditional data.</p>
<p>Frame format encoding of the <a class="el" href="a00932.html#ga6d49592ed6722290fee71419be7dac1f">sd_ble_user_mem_reply</a> response packet:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x67, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>4 bytes </td><td>nRF Error Code </td><td>See <a class="el" href="a00932.html#ga6d49592ed6722290fee71419be7dac1f">sd_ble_user_mem_reply</a> </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="default_response_packet_generic.png" alt="default_response_packet_generic.png"/>
<div class="caption">
Figure 2: Packet format for sd_ble_user_mem_reply response.</div></div>
<p> <br/>
</p>
<h1><a class="anchor" id="nrf51_opt_set_encoding"></a>
0x68 - sd_ble_opt_set</h1>
<h2><a class="anchor" id="nrf51_opt_set_sec_a"></a>
Function packet format</h2>
<p>Frame format encoding of the <a class="el" href="a00932.html#ga511d431bc3d9ccf9bef09ad20cbf855a">sd_ble_opt_set</a> packet.</p>
<p>The parameters are encoded in the following order:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x68, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>4 bytes </td><td>Option ID </td><td>See <a class="el" href="a00932.html#ga511d431bc3d9ccf9bef09ad20cbf855a">sd_ble_opt_set</a> </td></tr>
<tr>
<td>1 byte </td><td>Option present </td><td>0x00 - not present, 0x01 - present </td></tr>
<tr>
<td>1 ... 19 bytes </td><td>Conditional: Option </td><td>See <a class="el" href="a00222.html">ble_opt_t</a> </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="opt_set_request_packet.png" alt="opt_set_request_packet.png"/>
<div class="caption">
Figure 1: Packet format for sd_ble_opt_set function.</div></div>
<p> <br/>
</p>
<h2><a class="anchor" id="nrf51_opt_set_sec_b"></a>
Encoding of BLE Option</h2>
<p>The Option field (if present) is encoded depending on the Option ID field.</p>
<p>If <code>'Option ID' equals <a class="el" href="a00933.html#gga2da79b1e293414621d79814490a8598ea81b10bb7db3428519b0d18281bafafd4">BLE_GAP_OPT_CH_MAP</a></code>, Option is encoded as follows:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>2 bytes </td><td>Connection Handle </td><td>See <a class="el" href="a00161.html#adbf93719ab5531a19758504bdeb6c469">ble_gap_opt_ch_map_t::conn_handle</a> </td></tr>
<tr>
<td>5 bytes </td><td>Channel Map </td><td>See <a class="el" href="a00161.html#a71bb5ea1d8eecc86f819a1f5a3807818">ble_gap_opt_ch_map_t::ch_map</a>[5] </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="opt_set_channel_map_encoding.png" alt="opt_set_channel_map_encoding.png"/>
<div class="caption">
Figure 2: Encoding of Option when Option ID equals BLE_GAP_OPT_CH_MAP.</div></div>
<p> <br/>
</p>
<p>If <code>'Option ID' equals <a class="el" href="a00933.html#gga2da79b1e293414621d79814490a8598eaf2ca06bf556f7283c9ed43c1310d492b">BLE_GAP_OPT_LOCAL_CONN_LATENCY</a></code>, Option is encoded as follows:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>2 bytes </td><td>Connection Handle </td><td>See <a class="el" href="a00163.html">ble_gap_opt_local_conn_latency_t</a> </td></tr>
<tr>
<td>2 bytes </td><td>Requested Latency </td><td>See <a class="el" href="a00163.html">ble_gap_opt_local_conn_latency_t</a> </td></tr>
<tr>
<td>1 byte </td><td>Actual Latency present </td><td>0x00 - not present, 0x01 - present </td></tr>
<tr>
<td>2 bytes </td><td>Conditional: Actual Latency </td><td>See <a class="el" href="a00163.html">ble_gap_opt_local_conn_latency_t</a> </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="opt_set_local_conn_latency_encoding.png" alt="opt_set_local_conn_latency_encoding.png"/>
<div class="caption">
Figure 2: Encoding of Option when Option ID equals BLE_GAP_OPT_LOCAL_CONN_LATENCY.</div></div>
<p> <br/>
</p>
<p>If <code>'Option ID' = <a class="el" href="a00933.html#gga2da79b1e293414621d79814490a8598ea9b99a25c5a7668e610256c8c5bdffbf7">BLE_GAP_OPT_PASSKEY</a></code>, Option is encoded as follows:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>6 bytes </td><td>Passkey </td><td>See <a class="el" href="a00164.html">ble_gap_opt_passkey_t</a> </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="opt_set_passkey_encoding.png" alt="opt_set_passkey_encoding.png"/>
<div class="caption">
Figure 3: Encoding of Option when Option ID equals BLE_GAP_OPT_PASSKEY.</div></div>
<p> <br/>
</p>
<p>If <code>'Option ID' = <a class="el" href="a00933.html#gga2da79b1e293414621d79814490a8598eab364187b87f231ad372422775886675a">BLE_GAP_OPT_PRIVACY</a></code>, Option is encoded as follows:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>IRK present </td><td>0x00 - not present, 0x01 - present </td></tr>
<tr>
<td>16 bytes </td><td>Conditional: IRK </td><td>See <a class="el" href="a00165.html">ble_gap_opt_privacy_t</a> </td></tr>
<tr>
<td>2 bytes </td><td>Interval </td><td>See <a class="el" href="a00165.html">ble_gap_opt_privacy_t</a> </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="opt_set_privacy_encoding.png" alt="opt_set_privacy_encoding.png"/>
<div class="caption">
Figure 4: Encoding of Option when Option ID equals BLE_GAP_OPT_PRIVACY.</div></div>
<p> <br/>
</p>
<p>If <code>'Option ID' = <a class="el" href="a00933.html#gga2da79b1e293414621d79814490a8598ea2041952a97afe7f0c2ee773ee7a3140e">BLE_GAP_OPT_SCAN_REQ_REPORT</a></code>, Option is encoded as follows:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Scan request report (bitfield):<br/>
 - enable: 1 bit </td><td>See <a class="el" href="a00166.html">ble_gap_opt_scan_req_report_t</a> </td></tr>
</table>
<p><br/>
</p>
<p>If <code>'GAP Option ID' = <a class="el" href="a00933.html#gga2da79b1e293414621d79814490a8598ea50fe0f2d92ea6d93a52fd54f3f3cd988">BLE_GAP_OPT_COMPAT_MODE</a></code>, Option is encoded as follows:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Compatibility mode (bitfield):<br/>
 - mode_1_enable: 1 bit </td><td>See <a class="el" href="a00162.html">ble_gap_opt_compat_mode_t</a> </td></tr>
</table>
<p><br/>
</p>
<p>If <code>'Option ID' = <a class="el" href="a00929.html#ggab104c3b3aebea136806077a7a8d20d00abec3e50a45802caa9c024ad219e294ba">BLE_COMMON_OPT_RADIO_CPU_MUTEX</a></code>, Option is encoded as follows:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Radio CPU mutex (bitfield):<br/>
 - enable: 1 bit </td><td>See <a class="el" href="a00119.html">ble_common_opt_radio_cpu_mutex_t</a> </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="opt_set_bitfield_encoding.png" alt="opt_set_bitfield_encoding.png"/>
<div class="caption">
Figure 5: Encoding of Option when Option ID equals BLE_GAP_OPT_SCAN_REQ_REPORT or BLE_GAP_OPT_COMPAT_MODE or BLE_COMMON_OPT_RADIO_CPU_MUTEX.</div></div>
<p> <br/>
</p>
<h2><a class="anchor" id="nrf51_opt_set_sec_c"></a>
Response packet format</h2>
<p>Frame encoding of the <a class="el" href="a00932.html#ga511d431bc3d9ccf9bef09ad20cbf855a">sd_ble_opt_set</a> response packet:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x68, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>4 bytes </td><td>nRF Error Code </td><td>See <a class="el" href="a00932.html#ga511d431bc3d9ccf9bef09ad20cbf855a">sd_ble_opt_set</a> </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="default_response_packet_generic.png" alt="default_response_packet_generic.png"/>
<div class="caption">
Figure 6: Packet format for sd_ble_opt_set response.</div></div>
<p> <br/>
</p>
<h1><a class="anchor" id="nrf51_opt_get_encoding"></a>
0x69 - sd_ble_opt_get</h1>
<h2><a class="anchor" id="nrf51_opt_get_sec_a"></a>
Function packet format</h2>
<p>Frame format encoding of the <a class="el" href="a00932.html#gad64712eef7dba0287275d185768c5291">sd_ble_opt_get</a> packet.</p>
<p>The parameters are encoded in the following order:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x69, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>4 bytes </td><td>Option ID </td><td>See <a class="el" href="a00932.html#gad64712eef7dba0287275d185768c5291">sd_ble_opt_get</a> </td></tr>
<tr>
<td>1 byte </td><td>Option present </td><td>0x00 - not present, 0x01 - present </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="opt_get_request_packet.png" alt="opt_get_request_packet.png"/>
<div class="caption">
Figure 1: Packet format for sd_ble_opt_get function.</div></div>
<p> <br/>
</p>
<h2><a class="anchor" id="nrf51_opt_get_sec_b"></a>
Response packet format</h2>
<p>If a command was executed successfully, so that <code>'nRF Error Code' = <a class="el" href="a00745.html#ga7e6367efeaac363d8cf024940b4ec123">NRF_SUCCESS</a></code>, the nRF Error Code is followed by conditional data.</p>
<p>Frame encoding of the <a class="el" href="a00932.html#gad64712eef7dba0287275d185768c5291">sd_ble_opt_get</a> response packet:</p>
<table class="doxtable">
<tr>
<th>Length </th><th>Parameter </th><th>Value</th></tr>
<tr>
<td>1 byte </td><td>Operation Code </td><td>0x69, see <a class="el" href="a00929.html#gab53f87e96c3cbbb977a1c1b1004d7526">BLE_COMMON_SVCS</a> </td></tr>
<tr>
<td>4 bytes </td><td>nRF Error Code </td><td>See <a class="el" href="a00932.html#gad64712eef7dba0287275d185768c5291">sd_ble_opt_get</a> </td></tr>
<tr>
<td>4 bytes </td><td>Conditional: Option ID </td><td>See <a class="el" href="a00932.html#gad64712eef7dba0287275d185768c5291">sd_ble_opt_get</a> </td></tr>
<tr>
<td>1 ... 19 bytes </td><td>Conditional: Option </td><td>See <a class="el" href="a00222.html">ble_opt_t</a> </td></tr>
</table>
<p><br/>
</p>
<div class="image">
<img src="opt_get_response_packet_s120.png" alt="opt_get_response_packet_s120.png"/>
<div class="caption">
Figure 2: Packet format for sd_ble_opt_get response.</div></div>
<p> <br/>
</p>
<p>Encoding of the conditional field "Option" is done in the same way as in the sd_ble_opt_set request packet, which is described in detail in section <a class="el" href="a00088.html#nrf51_opt_set_sec_b">Encoding of BLE Option</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00003.html">Libraries</a></li><li class="navelem"><a class="el" href="a00076.html">BLE Serialization</a></li><li class="navelem"><a class="el" href="a00078.html">Serialization Codecs</a></li>
    <li class="footer">Generated on Thu May 7 2015 14:36:45 for nRF51 SDK - S120 SoftDevice by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
