<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF51 SDK - S120 SoftDevice: APIs to set up or read status of security on a link.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF51 SDK - S120 SoftDevice
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00909.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">APIs to set up or read status of security on a link.<div class="ingroups"><a class="el" href="a00907.html">Device Module APIs</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This section describes APIs to set up Security. These APIs require that the peer is connected before the procedures can be requested.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga483e7f5db6fdaa2178ad175bbdb535b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00687.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00909.html#ga483e7f5db6fdaa2178ad175bbdb535b0">dm_security_setup_req</a> (<a class="el" href="a00906.html#gaf4616538d9102b901e86d92fc4e82c5c">dm_handle_t</a> *p_handle)</td></tr>
<tr class="memdesc:ga483e7f5db6fdaa2178ad175bbdb535b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for requesting setting up security on a link.  <a href="#ga483e7f5db6fdaa2178ad175bbdb535b0">More...</a><br/></td></tr>
<tr class="separator:ga483e7f5db6fdaa2178ad175bbdb535b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga94876c139d64ad665a445bfb7ee37f13"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00687.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00909.html#ga94876c139d64ad665a445bfb7ee37f13">dm_security_status_req</a> (<a class="el" href="a00906.html#gaf4616538d9102b901e86d92fc4e82c5c">dm_handle_t</a> const *p_handle, <a class="el" href="a00906.html#ga7404a8275ca6d38f7400881deb1e6b0e">dm_security_status_t</a> *p_status)</td></tr>
<tr class="memdesc:ga94876c139d64ad665a445bfb7ee37f13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for reading the status of the security on a link.  <a href="#ga94876c139d64ad665a445bfb7ee37f13">More...</a><br/></td></tr>
<tr class="separator:ga94876c139d64ad665a445bfb7ee37f13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac5af9f76a8de0285c8a4d5c05dfa72e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00687.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00909.html#gac5af9f76a8de0285c8a4d5c05dfa72e0">dm_whitelist_create</a> (<a class="el" href="a00906.html#ga3c013385ac2ef5502370f598308d0339">dm_application_instance_t</a> const *p_handle, <a class="el" href="a00175.html">ble_gap_whitelist_t</a> *p_whitelist)</td></tr>
<tr class="memdesc:gac5af9f76a8de0285c8a4d5c05dfa72e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for creating the whitelist.  <a href="#gac5af9f76a8de0285c8a4d5c05dfa72e0">More...</a><br/></td></tr>
<tr class="separator:gac5af9f76a8de0285c8a4d5c05dfa72e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This section describes APIs to set up Security. These APIs require that the peer is connected before the procedures can be requested. </p>
<p>This group allows application to request security procedures or get the status of the security on a link. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga483e7f5db6fdaa2178ad175bbdb535b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00687.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a> dm_security_setup_req </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00906.html#gaf4616538d9102b901e86d92fc4e82c5c">dm_handle_t</a> *&#160;</td>
          <td class="paramname"><em>p_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for requesting setting up security on a link. </p>
<p>This API initiates security procedures with a peer device. </p>
<dl class="section note"><dt>Note</dt><dd>For the GAP Central role, in case peer is not bonded, request to bond/pair is initiated. If it is bonded, the link is re-encrypted using the existing bond information. For the GAP peripheral role, a Slave security request is sent.</dd></dl>
<p>If a pairing procedure is initiated successfully, application is notified of <a class="el" href="a00904.html#ga44bd57374aa0379152253c85b3f2f898">DM_EVT_SECURITY_SETUP_COMPLETE</a>. A result indicating success or failure is notified along with the event. In case the link is re-encrypted using existing bond information, <a class="el" href="a00904.html#gaf572cf54f12fa19eec469c0fff0c9a38">DM_EVT_LINK_SECURED</a> is notified to the application.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_handle</td><td>Identifies the link on which security is desired.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NRF_SUCCESS</td><td>On success, else an error code indicating reason for failure. </td></tr>
    <tr><td class="paramname">NRF_ERROR_INVALID_STATE</td><td>If the API is called without module initialization and/or application registration. </td></tr>
    <tr><td class="paramname">NRF_ERROR_NULL</td><td>If p_handle is NULL. </td></tr>
    <tr><td class="paramname">NRF_ERROR_INVALID_ADDR</td><td>If the peer is not identified by the handle provided by the application or if the peer is not connected when this procedure is requested. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga94876c139d64ad665a445bfb7ee37f13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00687.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a> dm_security_status_req </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00906.html#gaf4616538d9102b901e86d92fc4e82c5c">dm_handle_t</a> const *&#160;</td>
          <td class="paramname"><em>p_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00906.html#ga7404a8275ca6d38f7400881deb1e6b0e">dm_security_status_t</a> *&#160;</td>
          <td class="paramname"><em>p_status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for reading the status of the security on a link. </p>
<p>This API allows application to query status of security on a link.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_handle</td><td>Identifies the link on which security is desired. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_status</td><td>Pointer where security status is provided to the application. See <a class="el" href="a00906.html#ga7404a8275ca6d38f7400881deb1e6b0e">dm_security_status_t</a> for possible statuses that can be expected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NRF_SUCCESS</td><td>Or appropriate error code indicating reason for failure. </td></tr>
    <tr><td class="paramname">NRF_ERROR_INVALID_STATE</td><td>If the API is called without module initialization and/or application registration. </td></tr>
    <tr><td class="paramname">NRF_ERROR_NULL</td><td>If p_handle or p_status is NULL. </td></tr>
    <tr><td class="paramname">NRF_ERROR_INVALID_ADDR</td><td>If peer is not identified by the handle provided by the application or if peer is not connected when this procedure is requested. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gac5af9f76a8de0285c8a4d5c05dfa72e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00687.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a> dm_whitelist_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00906.html#ga3c013385ac2ef5502370f598308d0339">dm_application_instance_t</a> const *&#160;</td>
          <td class="paramname"><em>p_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00175.html">ble_gap_whitelist_t</a> *&#160;</td>
          <td class="paramname"><em>p_whitelist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for creating the whitelist. </p>
<p>This API allows application to create whitelist based on bonded peer devices in module data base.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_handle</td><td>Identifies the application requesting whitelist creation. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p_whitelist</td><td>Pointer where created whitelist is provided to the application.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>'addr_count' and 'irk_count' fields of the structure should be populated with the maximum number of devices that the application wishes to request in the whitelist. If the number of bonded devices is less than requested, the fields are updated with that number of devices. If the number of devices are more than requested, the module will populate the list with devices in the order the bond was established with the peer devices. Also, if this routine is called when a connection exists with one or more peer devices, those connected devices are not added to the whitelist.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NRF_SUCCESS</td><td>On success, else an error code indicating reason for failure. </td></tr>
    <tr><td class="paramname">NRF_ERROR_INVALID_STATE</td><td>If the API is called without module initialization and/or application registration. </td></tr>
    <tr><td class="paramname">NRF_ERROR_NULL</td><td>If p_handle or p_whitelist is NULL. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu May 7 2015 14:36:55 for nRF51 SDK - S120 SoftDevice by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
