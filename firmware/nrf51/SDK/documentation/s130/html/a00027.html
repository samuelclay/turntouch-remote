<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF51 SDK - S130 SoftDevice: Memory Manager</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF51 SDK - S130 SoftDevice
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00027.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Memory Manager </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <a class="el" href="a00951.html">Memory Manager</a> for nRF51 manages static buffers of fixed sizes in RAM. These buffers can be requested for usage, and freed when the application no longer needs them.</p>
<h1><a class="anchor" id="MEM_MANAGER"></a>
Overview</h1>
<p>The Memory Manager allocates memory of different sizes. The application that requests the memory does not need to have knowledge of how the memory allocation is handled internally.</p>
<p>The Memory Manager defines three pools of buffer sizes, small, medium, and large. The size of each buffer in the pool and the number of available buffers can be configured based on the application needs. The default configurations are:</p>
<table class="doxtable">
<tr>
<th>Parameter </th><th>Default value </th></tr>
<tr>
<td>MEMORY_MANAGER_SMALL_BLOCK_SIZE </td><td>128 </td></tr>
<tr>
<td>MEMORY_MANAGER_SMALL_BLOCK_COUNT </td><td>4 </td></tr>
<tr>
<td>MEMORY_MANAGER_MEDIUM_BLOCK_SIZE </td><td>512 </td></tr>
<tr>
<td>MEMORY_MANAGER_MEDIUM_BLOCK_COUNT </td><td>3 </td></tr>
<tr>
<td>MEMORY_MANAGER_LARGE_BLOCK_COUNT </td><td>2056 </td></tr>
<tr>
<td>MEMORY_MANAGER_LARGE_BLOCK_SIZE </td><td>1 </td></tr>
</table>
<p>You can disable any of the pools by setting the buffer count for that pool category to zero. For example, if your application does not need large buffers, define <a class="el" href="a00027.html#MEMORY_MANAGER_LARGE_BLOCK_COUNT">MEMORY_MANAGER_LARGE_BLOCK_COUNT</a> to 0.</p>
<p>The application does not need to be aware of which pool was used to allocate the requested memory. The requested memory can be of any size; the application does not need to request a buffer that is equal to the size of one of the pool block sizes. For example, if the Memory Manager uses the default configuration specified above and the application requests a memory buffer of size 480, the Memory Manager determines which pool is most suitable for this size of memory. In this example, the medium block is best suited. However, if no buffers in the medium buffer pool are available, the Memory Manager will attempt to provide the buffer from the next block pool. Therefore, in this example, the application would be assigned a buffer from the large buffer pool.</p>
<p>See the flow chart below for the buffer allocation algorithm that is used. The function that is used to allocate a buffer is called <a class="el" href="a00951.html#gae56ae5e5fbdc399e4e53f80162d6c849">nrf51_sdk_mem_alloc</a></p>
<div class="image">
<img src="memory_manager_allocation_algorithm.png" alt="memory_manager_allocation_algorithm.png"/>
<div class="caption">
Figure 1. Memory Manager Allocation Algorithm.</div></div>
 <h1><a class="anchor" id="MEM_MANAGER_CONF"></a>
Configuration parameters</h1>
<p>The following configuration parameters should be defined in <code>sdk_config.h</code>.</p>
<h2><a class="anchor" id="MEM_MANAGER_DISABLE_LOGS"></a>
MEM_MANAGER_DISABLE_LOGS</h2>
<p>Disables debug tracing in the module. To enable tracing, this flag must be set to 0 and ENABLE_DEBUG_LOG_SUPPORT must be set to 1. </p>
<table class="doxtable">
<tr>
<th>Description </th><th>Value </th></tr>
<tr>
<td>Enable debug trace </td><td>0 </td></tr>
<tr>
<td>Disable debug trace </td><td>1 </td></tr>
<tr>
<td>Dependencies </td><td>ENABLE_DEBUG_LOG_SUPPORT </td></tr>
</table>
<h2><a class="anchor" id="MEM_MANAGER_DISABLE_API_PARAM_CHECK"></a>
MEM_MANAGER_DISABLE_API_PARAM_CHECK</h2>
<p>Disables API parameter checks in the module. Set this define to 1 to disable checks on API parameters in the module. API parameter checks are added to ensure that the correct parameters are passed to the module. These checks are useful during development phase, but they might be redundant when the application is finalized. Disabling these checks might improve performance. </p>
<table class="doxtable">
<tr>
<th>Description </th><th>Value </th></tr>
<tr>
<td>Enable API parameters check </td><td>0 </td></tr>
<tr>
<td>Disable API parameters check </td><td>1 </td></tr>
<tr>
<td>Dependencies </td><td>None </td></tr>
</table>
<h2><a class="anchor" id="MEMORY_MANAGER_SMALL_BLOCK_COUNT"></a>
MEMORY_MANAGER_SMALL_BLOCK_COUNT</h2>
<p>Maximum number of memory blocks identified as <em>small</em> blocks. </p>
<table class="doxtable">
<tr>
<th>Restriction </th><th>Value </th></tr>
<tr>
<td>Minimum value </td><td>0 </td></tr>
<tr>
<td>Maximum value </td><td>255 </td></tr>
<tr>
<td>Dependencies </td><td>None </td></tr>
</table>
<h2><a class="anchor" id="MEMORY_MANAGER_MEDIUM_BLOCK_COUNT"></a>
MEMORY_MANAGER_MEDIUM_BLOCK_COUNT</h2>
<p>Maximum number of memory blocks identified as <em>medium</em> blocks. </p>
<table class="doxtable">
<tr>
<th>Restriction </th><th>Value </th></tr>
<tr>
<td>Minimum value </td><td>0 </td></tr>
<tr>
<td>Maximum value </td><td>255 </td></tr>
<tr>
<td>Dependencies </td><td>None </td></tr>
</table>
<h2><a class="anchor" id="MEMORY_MANAGER_LARGE_BLOCK_COUNT"></a>
MEMORY_MANAGER_LARGE_BLOCK_COUNT</h2>
<p>Maximum number of memory blocks identified as <em>large</em> blocks. </p>
<table class="doxtable">
<tr>
<th>Restriction </th><th>Value </th></tr>
<tr>
<td>Minimum value </td><td>0 </td></tr>
<tr>
<td>Maximum value </td><td>255 </td></tr>
<tr>
<td>Dependencies </td><td>None </td></tr>
</table>
<h2><a class="anchor" id="MEMORY_MANAGER_SMALL_BLOCK_SIZE"></a>
MEMORY_MANAGER_SMALL_BLOCK_SIZE</h2>
<p>The size of each memory block identified as <em>small</em> block. The size should be a multiple of the word size. </p>
<table class="doxtable">
<tr>
<th>Restriction </th><th>Value </th></tr>
<tr>
<td>Minimum value </td><td>32 </td></tr>
<tr>
<td>Maximum value </td><td>MEMORY_MANAGER_MEDIUM_BLOCK_SIZE - 1 </td></tr>
<tr>
<td>Dependencies </td><td>MEMORY_MANAGER_MEDIUM_BLOCK_SIZE </td></tr>
</table>
<h2><a class="anchor" id="MEMORY_MANAGER_MEDIUM_BLOCK_SIZE"></a>
MEMORY_MANAGER_MEDIUM_BLOCK_SIZE</h2>
<p>Size of each memory block identified as <em>medium</em> block. The size should be a multiple of the word size. </p>
<table class="doxtable">
<tr>
<th>Restriction </th><th>Value </th></tr>
<tr>
<td>Minimum value </td><td>MEMORY_MANAGER_SMALL_BLOCK_SIZE + 1 </td></tr>
<tr>
<td>Maximum value </td><td>MEMORY_MANAGER_LARGE_BLOCK_SIZE - 1 </td></tr>
<tr>
<td>Dependencies </td><td>MEMORY_MANAGER_LARGE_BLOCK_SIZE, MEMORY_MANAGER_SMALL_BLOCK_SIZE </td></tr>
</table>
<h2><a class="anchor" id="MEMORY_MANAGER_LARGE_BLOCK_SIZE"></a>
MEMORY_MANAGER_LARGE_BLOCK_SIZE</h2>
<p>The size of each memory block identified as <em>large</em> block. The size should be a multiple of the word size. </p>
<table class="doxtable">
<tr>
<th>Restriction </th><th>Value </th></tr>
<tr>
<td>Minimum value </td><td>MEMORY_MANAGER_MEDIUM_BLOCK_SIZE + 1 </td></tr>
<tr>
<td>Maximum value </td><td>Any value based on availability of RAM. </td></tr>
<tr>
<td>Dependencies </td><td>MEMORY_MANAGER_LARGE_BLOCK_SIZE </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00003.html">Libraries</a></li>
    <li class="footer">Generated on Thu May 7 2015 14:37:01 for nRF51 SDK - S130 SoftDevice by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
