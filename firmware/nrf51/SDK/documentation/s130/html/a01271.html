<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF51 SDK - S130 SoftDevice: Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF51 SDK - S130 SoftDevice
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a01271.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Functions<div class="ingroups"><a class="el" href="a01086.html">Generic Attribute Profile (GATT) Server</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga39fea660228e4b2e788af7018a83927a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01271.html#ga39fea660228e4b2e788af7018a83927a">sd_ble_gatts_service_add</a> (uint8_t type, <a class="el" href="a00384.html">ble_uuid_t</a> const *p_uuid, uint16_t *p_handle)</td></tr>
<tr class="memdesc:ga39fea660228e4b2e788af7018a83927a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a service declaration to the Attribute Table.  <a href="#ga39fea660228e4b2e788af7018a83927a">More...</a><br/></td></tr>
<tr class="separator:ga39fea660228e4b2e788af7018a83927a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga591ba1e7e2b8ecb63541a1f2d5282b76"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01271.html#ga591ba1e7e2b8ecb63541a1f2d5282b76">sd_ble_gatts_include_add</a> (uint16_t service_handle, uint16_t inc_srvc_handle, uint16_t *p_include_handle)</td></tr>
<tr class="memdesc:ga591ba1e7e2b8ecb63541a1f2d5282b76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an include declaration to the Attribute Table.  <a href="#ga591ba1e7e2b8ecb63541a1f2d5282b76">More...</a><br/></td></tr>
<tr class="separator:ga591ba1e7e2b8ecb63541a1f2d5282b76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ee07ea4b96dcca1537b01ff9a7692ba"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01271.html#ga9ee07ea4b96dcca1537b01ff9a7692ba">sd_ble_gatts_characteristic_add</a> (uint16_t service_handle, <a class="el" href="a00308.html">ble_gatts_char_md_t</a> const *p_char_md, <a class="el" href="a00306.html">ble_gatts_attr_t</a> const *p_attr_char_value, <a class="el" href="a00307.html">ble_gatts_char_handles_t</a> *p_handles)</td></tr>
<tr class="memdesc:ga9ee07ea4b96dcca1537b01ff9a7692ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a characteristic declaration, a characteristic value declaration and optional characteristic descriptor declarations to the Attribute Table.  <a href="#ga9ee07ea4b96dcca1537b01ff9a7692ba">More...</a><br/></td></tr>
<tr class="separator:ga9ee07ea4b96dcca1537b01ff9a7692ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0e1478bd565ad99f998671e3baf9847d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01271.html#ga0e1478bd565ad99f998671e3baf9847d">sd_ble_gatts_descriptor_add</a> (uint16_t char_handle, <a class="el" href="a00306.html">ble_gatts_attr_t</a> const *p_attr, uint16_t *p_handle)</td></tr>
<tr class="memdesc:ga0e1478bd565ad99f998671e3baf9847d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a descriptor to the Attribute Table.  <a href="#ga0e1478bd565ad99f998671e3baf9847d">More...</a><br/></td></tr>
<tr class="separator:ga0e1478bd565ad99f998671e3baf9847d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2760c51ea71853bd74e2e7e7117ef52a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01271.html#ga2760c51ea71853bd74e2e7e7117ef52a">sd_ble_gatts_value_set</a> (uint16_t conn_handle, uint16_t handle, <a class="el" href="a00321.html">ble_gatts_value_t</a> *p_value)</td></tr>
<tr class="memdesc:ga2760c51ea71853bd74e2e7e7117ef52a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the value of a given attribute.  <a href="#ga2760c51ea71853bd74e2e7e7117ef52a">More...</a><br/></td></tr>
<tr class="separator:ga2760c51ea71853bd74e2e7e7117ef52a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad95321e157e632e7ac3a77f3388cbdf7"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01271.html#gad95321e157e632e7ac3a77f3388cbdf7">sd_ble_gatts_value_get</a> (uint16_t conn_handle, uint16_t handle, <a class="el" href="a00321.html">ble_gatts_value_t</a> *p_value)</td></tr>
<tr class="memdesc:gad95321e157e632e7ac3a77f3388cbdf7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the value of a given attribute.  <a href="#gad95321e157e632e7ac3a77f3388cbdf7">More...</a><br/></td></tr>
<tr class="separator:gad95321e157e632e7ac3a77f3388cbdf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga313fe43c2e93267da668572e885945db"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01271.html#ga313fe43c2e93267da668572e885945db">sd_ble_gatts_hvx</a> (uint16_t conn_handle, <a class="el" href="a00318.html">ble_gatts_hvx_params_t</a> const *p_hvx_params)</td></tr>
<tr class="memdesc:ga313fe43c2e93267da668572e885945db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify or Indicate an attribute value.  <a href="#ga313fe43c2e93267da668572e885945db">More...</a><br/></td></tr>
<tr class="separator:ga313fe43c2e93267da668572e885945db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c8c90d73fa27ba6691ad82b4a960adc"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01271.html#ga2c8c90d73fa27ba6691ad82b4a960adc">sd_ble_gatts_service_changed</a> (uint16_t conn_handle, uint16_t start_handle, uint16_t end_handle)</td></tr>
<tr class="memdesc:ga2c8c90d73fa27ba6691ad82b4a960adc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicate the Service Changed attribute value.  <a href="#ga2c8c90d73fa27ba6691ad82b4a960adc">More...</a><br/></td></tr>
<tr class="separator:ga2c8c90d73fa27ba6691ad82b4a960adc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6de7aea3a870669e1d869b047de95545"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01271.html#ga6de7aea3a870669e1d869b047de95545">sd_ble_gatts_rw_authorize_reply</a> (uint16_t conn_handle, <a class="el" href="a00320.html">ble_gatts_rw_authorize_reply_params_t</a> const *p_rw_authorize_reply_params)</td></tr>
<tr class="memdesc:ga6de7aea3a870669e1d869b047de95545"><td class="mdescLeft">&#160;</td><td class="mdescRight">Respond to a Read/Write authorization request.  <a href="#ga6de7aea3a870669e1d869b047de95545">More...</a><br/></td></tr>
<tr class="separator:ga6de7aea3a870669e1d869b047de95545"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga577c788e199b1a2c0d19602b07ef2515"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01271.html#ga577c788e199b1a2c0d19602b07ef2515">sd_ble_gatts_sys_attr_set</a> (uint16_t conn_handle, uint8_t const *p_sys_attr_data, uint16_t len, uint32_t flags)</td></tr>
<tr class="memdesc:ga577c788e199b1a2c0d19602b07ef2515"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update persistent system attribute information.  <a href="#ga577c788e199b1a2c0d19602b07ef2515">More...</a><br/></td></tr>
<tr class="separator:ga577c788e199b1a2c0d19602b07ef2515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4a44241bdcc7262603841f77d9eeb29f"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01271.html#ga4a44241bdcc7262603841f77d9eeb29f">sd_ble_gatts_sys_attr_get</a> (uint16_t conn_handle, uint8_t *p_sys_attr_data, uint16_t *p_len, uint32_t flags)</td></tr>
<tr class="memdesc:ga4a44241bdcc7262603841f77d9eeb29f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve persistent system attribute information from the stack.  <a href="#ga4a44241bdcc7262603841f77d9eeb29f">More...</a><br/></td></tr>
<tr class="separator:ga4a44241bdcc7262603841f77d9eeb29f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga9ee07ea4b96dcca1537b01ff9a7692ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sd_ble_gatts_characteristic_add </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>service_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00308.html">ble_gatts_char_md_t</a> const *&#160;</td>
          <td class="paramname"><em>p_char_md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00306.html">ble_gatts_attr_t</a> const *&#160;</td>
          <td class="paramname"><em>p_attr_char_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00307.html">ble_gatts_char_handles_t</a> *&#160;</td>
          <td class="paramname"><em>p_handles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a characteristic declaration, a characteristic value declaration and optional characteristic descriptor declarations to the Attribute Table. </p>
<dl class="section note"><dt>Note</dt><dd>It is currently only possible to add a characteristic to the last added service (i.e. only sequential population is supported at this time).</dd>
<dd>
Several restrictions apply to the parameters, such as matching permissions between the user description descriptor and the writeable auxiliaries bits, readable (no security) and writeable (selectable) CCCDs and SCCDs and valid presentation format values.</dd>
<dd>
If no metadata is provided for the optional descriptors, their permissions will be derived from the characteristic permissions.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">service_handle</td><td>Handle of the service where the characteristic is to be placed, if <a class="el" href="a01262.html#ga755613d0f9d0979be50a3814c1436ab9">BLE_GATT_HANDLE_INVALID</a> is used, it will be placed sequentially. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_char_md</td><td>Characteristic metadata. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_attr_char_value</td><td>Pointer to the attribute structure corresponding to the characteristic value. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_handles</td><td>Pointer to the structure where the assigned handles will be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Successfully added a characteristic. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gabc562e4ddfe2f427666a3acdd0b469a3" title="Bad Memory Address.">NRF_ERROR_INVALID_ADDR</a></td><td>Invalid pointer supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga0a5831cf5092e0dd43a01869676ee076" title="Invalid Parameter.">NRF_ERROR_INVALID_PARAM</a></td><td>Invalid parameter(s) supplied, service handle, Vendor Specific UUIDs, lengths, and permissions need to adhere to the constraints. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gaf0aff2ba7864b34a36b4a96986e1851e" title="Invalid state, operation disallowed in this state.">NRF_ERROR_INVALID_STATE</a></td><td>Invalid state to perform operation, a service context is required. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga85125dae5d7e9d4b9964acbc13f641b3" title="Forbidden Operation.">NRF_ERROR_FORBIDDEN</a></td><td>Forbidden value supplied, certain UUIDs are reserved for the stack. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7ef4d466b79b31c6325f8b7af5d4f75f" title="No Memory for operation.">NRF_ERROR_NO_MEM</a></td><td>Not enough memory to complete operation. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga4c61f2b54667506e90cc296721b2e658" title="Data size exceeds limit.">NRF_ERROR_DATA_SIZE</a></td><td>Invalid data size(s) supplied, attribute lengths are restricted by <a class="el" href="a01009.html">Maximum attribute lengths</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga0e1478bd565ad99f998671e3baf9847d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sd_ble_gatts_descriptor_add </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>char_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00306.html">ble_gatts_attr_t</a> const *&#160;</td>
          <td class="paramname"><em>p_attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>p_handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a descriptor to the Attribute Table. </p>
<dl class="section note"><dt>Note</dt><dd>It is currently only possible to add a descriptor to the last added characteristic (i.e. only sequential population is supported at this time).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">char_handle</td><td>Handle of the characteristic where the descriptor is to be placed, if <a class="el" href="a01262.html#ga755613d0f9d0979be50a3814c1436ab9">BLE_GATT_HANDLE_INVALID</a> is used, it will be placed sequentially. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_attr</td><td>Pointer to the attribute structure. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_handle</td><td>Pointer to a 16-bit word where the assigned handle will be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Successfully added a descriptor. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gabc562e4ddfe2f427666a3acdd0b469a3" title="Bad Memory Address.">NRF_ERROR_INVALID_ADDR</a></td><td>Invalid pointer supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga0a5831cf5092e0dd43a01869676ee076" title="Invalid Parameter.">NRF_ERROR_INVALID_PARAM</a></td><td>Invalid parameter(s) supplied, characteristic handle, Vendor Specific UUIDs, lengths, and permissions need to adhere to the constraints. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gaf0aff2ba7864b34a36b4a96986e1851e" title="Invalid state, operation disallowed in this state.">NRF_ERROR_INVALID_STATE</a></td><td>Invalid state to perform operation, a characteristic context is required. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga85125dae5d7e9d4b9964acbc13f641b3" title="Forbidden Operation.">NRF_ERROR_FORBIDDEN</a></td><td>Forbidden value supplied, certain UUIDs are reserved for the stack. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7ef4d466b79b31c6325f8b7af5d4f75f" title="No Memory for operation.">NRF_ERROR_NO_MEM</a></td><td>Not enough memory to complete operation. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga4c61f2b54667506e90cc296721b2e658" title="Data size exceeds limit.">NRF_ERROR_DATA_SIZE</a></td><td>Invalid data size(s) supplied, attribute lengths are restricted by <a class="el" href="a01009.html">Maximum attribute lengths</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga313fe43c2e93267da668572e885945db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sd_ble_gatts_hvx </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00318.html">ble_gatts_hvx_params_t</a> const *&#160;</td>
          <td class="paramname"><em>p_hvx_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notify or Indicate an attribute value. </p>
<p>This function checks for the relevant Client Characteristic Configuration descriptor value to verify that the relevant operation (notification or indication) has been enabled by the client. It is also able to update the attribute value before issuing the PDU, so that the application can atomically perform a value update and a server initiated transaction with a single API call. If the application chooses to indicate an attribute value, a <a class="el" href="a01268.html#ggae537647902af1b05c1e32f12d6b401c7af6a065c5c7e0682989ddd6cc557e0ffa">BLE_GATTS_EVT_HVC</a> event will be issued as soon as the confirmation arrives from the peer.</p>
<dl class="section note"><dt>Note</dt><dd>The local attribute value may be updated even if an outgoing packet is not sent to the peer due to an error during execution. When receiveing the error codes <a class="el" href="a01025.html#gaf0aff2ba7864b34a36b4a96986e1851e">NRF_ERROR_INVALID_STATE</a>, <a class="el" href="a01025.html#ga5d2d8608f6d6a0329f58961a969e946e">NRF_ERROR_BUSY</a>, <a class="el" href="a01008.html#ga1d0833ac31d0c319e5286623b6301d0a">BLE_ERROR_GATTS_SYS_ATTR_MISSING</a> and <a class="el" href="a00976.html#ga901e1bc3ccae29eff9fb31cabdbb5e02">BLE_ERROR_NO_TX_BUFFERS</a> the Attribute Table has been updated. The caller can check whether the value has been updated by looking at the contents of *(p_hvx_params-&gt;p_len).</dd>
<dd>
It is important to note that a notification will <b>consume an application buffer</b>, and will therefore generate a <a class="el" href="a01253.html#ggaa55e423bfea45f03764a636f2cec7a8ba408a77f131a2d314fbf477cdb2d1e0f6">BLE_EVT_TX_COMPLETE</a> event when the packet has been transmitted. An indication on the other hand will use the standard server internal buffer and thus will only generate a <a class="el" href="a01268.html#ggae537647902af1b05c1e32f12d6b401c7af6a065c5c7e0682989ddd6cc557e0ffa">BLE_GATTS_EVT_HVC</a> event as soon as the confirmation has been received from the peer. Please see the documentation of <a class="el" href="a01256.html#ga37e443c585217475a97e40dfb443a1b6">sd_ble_tx_buffer_count_get</a> for more details.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_hvx_params</td><td>Pointer to an HVx parameters structure. If the p_data member contains a non-NULL pointer the attribute value will be updated with the contents pointed by it before sending the notification or indication.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Successfully queued a notification or indication for transmission, and optionally updated the attribute value. </td></tr>
    <tr><td class="paramname"><a class="el" href="a00976.html#gabdc27cbc2ffac4a50640a0ce992c03af">BLE_ERROR_INVALID_CONN_HANDLE</a></td><td>Invalid Connection Handle. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gaf0aff2ba7864b34a36b4a96986e1851e" title="Invalid state, operation disallowed in this state.">NRF_ERROR_INVALID_STATE</a></td><td>Invalid Connection State or notifications and/or indications not enabled in the CCCD. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gabc562e4ddfe2f427666a3acdd0b469a3" title="Bad Memory Address.">NRF_ERROR_INVALID_ADDR</a></td><td>Invalid pointer supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga0a5831cf5092e0dd43a01869676ee076" title="Invalid Parameter.">NRF_ERROR_INVALID_PARAM</a></td><td>Invalid parameter(s) supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="a00976.html#ga6346bb5ec3bcd4a25332dc782c1b7e01">BLE_ERROR_INVALID_ATTR_HANDLE</a></td><td>Invalid attribute handle(s) supplied. Only attributes added directly by the application are available to notify and indicate. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01008.html#ga050988950fb5cfb9e64b1f91f8872b45">BLE_ERROR_GATTS_INVALID_ATTR_TYPE</a></td><td>Invalid attribute type(s) supplied, only characteristic values may be notified and indicated. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga349d25ada15be023e0d507f45ada682c" title="Not found.">NRF_ERROR_NOT_FOUND</a></td><td>Attribute not found. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga4c61f2b54667506e90cc296721b2e658" title="Data size exceeds limit.">NRF_ERROR_DATA_SIZE</a></td><td>Invalid data size(s) supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga5d2d8608f6d6a0329f58961a969e946e" title="Busy.">NRF_ERROR_BUSY</a></td><td>Procedure already in progress. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01008.html#ga1d0833ac31d0c319e5286623b6301d0a">BLE_ERROR_GATTS_SYS_ATTR_MISSING</a></td><td>System attributes missing, use <a class="el" href="a01271.html#ga577c788e199b1a2c0d19602b07ef2515">sd_ble_gatts_sys_attr_set</a> to set them to a known value. </td></tr>
    <tr><td class="paramname"><a class="el" href="a00976.html#ga901e1bc3ccae29eff9fb31cabdbb5e02">BLE_ERROR_NO_TX_BUFFERS</a></td><td>There are no available buffers to send the data, applies only to notifications. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga591ba1e7e2b8ecb63541a1f2d5282b76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sd_ble_gatts_include_add </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>service_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>inc_srvc_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>p_include_handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add an include declaration to the Attribute Table. </p>
<dl class="section note"><dt>Note</dt><dd>It is currently only possible to add an include declaration to the last added service (i.e. only sequential population is supported at this time).</dd>
<dd>
The included service must already be present in the Attribute Table prior to this call.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">service_handle</td><td>Handle of the service where the included service is to be placed, if <a class="el" href="a01262.html#ga755613d0f9d0979be50a3814c1436ab9">BLE_GATT_HANDLE_INVALID</a> is used, it will be placed sequentially. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inc_srvc_handle</td><td>Handle of the included service. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_include_handle</td><td>Pointer to a 16-bit word where the assigned handle will be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Successfully added an include declaration. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gabc562e4ddfe2f427666a3acdd0b469a3" title="Bad Memory Address.">NRF_ERROR_INVALID_ADDR</a></td><td>Invalid pointer supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga0a5831cf5092e0dd43a01869676ee076" title="Invalid Parameter.">NRF_ERROR_INVALID_PARAM</a></td><td>Invalid parameter(s) supplied, handle values need to match previously added services. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gaf0aff2ba7864b34a36b4a96986e1851e" title="Invalid state, operation disallowed in this state.">NRF_ERROR_INVALID_STATE</a></td><td>Invalid state to perform operation. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga85125dae5d7e9d4b9964acbc13f641b3" title="Forbidden Operation.">NRF_ERROR_FORBIDDEN</a></td><td>Forbidden value supplied, self inclusions are not allowed. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7ef4d466b79b31c6325f8b7af5d4f75f" title="No Memory for operation.">NRF_ERROR_NO_MEM</a></td><td>Not enough memory to complete operation. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga349d25ada15be023e0d507f45ada682c" title="Not found.">NRF_ERROR_NOT_FOUND</a></td><td>Attribute not found. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga6de7aea3a870669e1d869b047de95545"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sd_ble_gatts_rw_authorize_reply </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00320.html">ble_gatts_rw_authorize_reply_params_t</a> const *&#160;</td>
          <td class="paramname"><em>p_rw_authorize_reply_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Respond to a Read/Write authorization request. </p>
<dl class="section note"><dt>Note</dt><dd>This call should only be used as a response to a <a class="el" href="a01268.html#ggae537647902af1b05c1e32f12d6b401c7a333a0e896f77ea1c7f9a0e1e11f8240d">BLE_GATTS_EVT_RW_AUTHORIZE_REQUEST</a> event issued to the application.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_rw_authorize_reply_params</td><td>Pointer to a structure with the attribute provided by the application.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Successfully queued a response to the peer, and in the case of a write operation, Attribute Table updated. </td></tr>
    <tr><td class="paramname"><a class="el" href="a00976.html#gabdc27cbc2ffac4a50640a0ce992c03af">BLE_ERROR_INVALID_CONN_HANDLE</a></td><td>Invalid Connection Handle. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gaf0aff2ba7864b34a36b4a96986e1851e" title="Invalid state, operation disallowed in this state.">NRF_ERROR_INVALID_STATE</a></td><td>Invalid Connection State or no authorization request pending. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga0a5831cf5092e0dd43a01869676ee076" title="Invalid Parameter.">NRF_ERROR_INVALID_PARAM</a></td><td>Authorization op invalid, or for Read Authorization reply: requested handles not replied with, or for Write Authorization reply: handle supplied does not match requested handle. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga5d2d8608f6d6a0329f58961a969e946e" title="Busy.">NRF_ERROR_BUSY</a></td><td>The stack is busy. Retry at later time. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga39fea660228e4b2e788af7018a83927a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sd_ble_gatts_service_add </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00384.html">ble_uuid_t</a> const *&#160;</td>
          <td class="paramname"><em>p_uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>p_handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a service declaration to the Attribute Table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>Toggles between primary and secondary services, see <a class="el" href="a01010.html">GATT Server Service Types</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_uuid</td><td>Pointer to service UUID. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_handle</td><td>Pointer to a 16-bit word where the assigned handle will be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Secondary Services are only relevant in the context of the entity that references them, it is therefore forbidden to add a secondary service declaration that is not referenced by another service later in the Attribute Table.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Successfully added a service declaration. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gabc562e4ddfe2f427666a3acdd0b469a3" title="Bad Memory Address.">NRF_ERROR_INVALID_ADDR</a></td><td>Invalid pointer supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga0a5831cf5092e0dd43a01869676ee076" title="Invalid Parameter.">NRF_ERROR_INVALID_PARAM</a></td><td>Invalid parameter(s) supplied, Vendor Specific UUIDs need to be present in the table. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga85125dae5d7e9d4b9964acbc13f641b3" title="Forbidden Operation.">NRF_ERROR_FORBIDDEN</a></td><td>Forbidden value supplied, certain UUIDs are reserved for the stack. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7ef4d466b79b31c6325f8b7af5d4f75f" title="No Memory for operation.">NRF_ERROR_NO_MEM</a></td><td>Not enough memory to complete operation. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga2c8c90d73fa27ba6691ad82b4a960adc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sd_ble_gatts_service_changed </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>start_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>end_handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicate the Service Changed attribute value. </p>
<p>This call will send a Handle Value Indication to one or more peers connected to inform them that the Attribute Table layout has changed. As soon as the peer has confirmed the indication, a <a class="el" href="a01268.html#ggae537647902af1b05c1e32f12d6b401c7a052eae0b3eb431b7e984107b2308ad50">BLE_GATTS_EVT_SC_CONFIRM</a> event will be issued.</p>
<dl class="section note"><dt>Note</dt><dd>Some of the restrictions and limitations that apply to <a class="el" href="a01271.html#ga313fe43c2e93267da668572e885945db">sd_ble_gatts_hvx</a> also apply here.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">start_handle</td><td>Start of affected attribute handle range. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">end_handle</td><td>End of affected attribute handle range.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Successfully queued the Service Changed indication for transmission. </td></tr>
    <tr><td class="paramname"><a class="el" href="a00976.html#gabdc27cbc2ffac4a50640a0ce992c03af">BLE_ERROR_INVALID_CONN_HANDLE</a></td><td>Invalid Connection Handle. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gaf0aff2ba7864b34a36b4a96986e1851e" title="Invalid state, operation disallowed in this state.">NRF_ERROR_INVALID_STATE</a></td><td>Invalid Connection State or notifications and/or indications not enabled in the CCCD. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga0a5831cf5092e0dd43a01869676ee076" title="Invalid Parameter.">NRF_ERROR_INVALID_PARAM</a></td><td>Invalid parameter(s) supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="a00976.html#ga6346bb5ec3bcd4a25332dc782c1b7e01">BLE_ERROR_INVALID_ATTR_HANDLE</a></td><td>Invalid attribute handle(s) supplied, handles must be in the range populated by the application. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gaf0aff2ba7864b34a36b4a96986e1851e" title="Invalid state, operation disallowed in this state.">NRF_ERROR_INVALID_STATE</a></td><td>Invalid state to perform operation, notifications or indications must be enabled in the CCCD. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga5d2d8608f6d6a0329f58961a969e946e" title="Busy.">NRF_ERROR_BUSY</a></td><td>Procedure already in progress. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01008.html#ga1d0833ac31d0c319e5286623b6301d0a">BLE_ERROR_GATTS_SYS_ATTR_MISSING</a></td><td>System attributes missing, use <a class="el" href="a01271.html#ga577c788e199b1a2c0d19602b07ef2515">sd_ble_gatts_sys_attr_set</a> to set them to a known value. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga4a44241bdcc7262603841f77d9eeb29f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sd_ble_gatts_sys_attr_get </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>p_sys_attr_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>p_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve persistent system attribute information from the stack. </p>
<p>This call is used to retrieve information about values to be stored perisistently by the application during the lifetime of a connection or after it has been terminated. When a new connection is established with the same bonded device, the system attribute information retrieved with this function should be restored using using <a class="el" href="a01271.html#ga577c788e199b1a2c0d19602b07ef2515">sd_ble_gatts_sys_attr_set</a>. If retrieved after disconnection, the data should be read before a new connection established. The connection handle for the previous, now disconnected, connection will remain valid until a new one is created to allow this API call to refer to it. Connection handles belonging to active connections can be used as well, but care should be taken since the system attributes may be written to at any time by the peer during a connection's lifetime.</p>
<dl class="section note"><dt>Note</dt><dd>When the <a class="el" href="a01015.html#ga62a3396d4af600e7f397c6b5159d44d1">BLE_GATTS_SYS_ATTR_FLAG_SYS_SRVCS</a> is used with this function, only the system attributes included in system services will be returned. </dd>
<dd>
When the <a class="el" href="a01015.html#gadc1332e4e412b3e59a7d0a9038d5ac09">BLE_GATTS_SYS_ATTR_FLAG_USR_SRVCS</a> is used with this function, only the system attributes included in user services will be returned.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle of the recently terminated connection. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_sys_attr_data</td><td>Pointer to a buffer where updated information about system attributes will be filled in. NULL can be provided to obtain the length of the data </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p_len</td><td>Size of application buffer if p_sys_attr_data is not NULL. Unconditially updated to actual length of system attribute data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Optional additional flags, see <a class="el" href="a01015.html">System Attribute Flags</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Successfully retrieved the system attribute information. </td></tr>
    <tr><td class="paramname"><a class="el" href="a00976.html#gabdc27cbc2ffac4a50640a0ce992c03af">BLE_ERROR_INVALID_CONN_HANDLE</a></td><td>Invalid Connection Handle. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gabc562e4ddfe2f427666a3acdd0b469a3" title="Bad Memory Address.">NRF_ERROR_INVALID_ADDR</a></td><td>Invalid pointer supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga4c61f2b54667506e90cc296721b2e658" title="Data size exceeds limit.">NRF_ERROR_DATA_SIZE</a></td><td>The system attribute information did not fit into the provided buffer. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga349d25ada15be023e0d507f45ada682c" title="Not found.">NRF_ERROR_NOT_FOUND</a></td><td>No system attributes found. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga577c788e199b1a2c0d19602b07ef2515"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sd_ble_gatts_sys_attr_set </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t const *&#160;</td>
          <td class="paramname"><em>p_sys_attr_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update persistent system attribute information. </p>
<p>Supply information about persistent system attributes to the stack, previously obtained using <a class="el" href="a01271.html#ga4a44241bdcc7262603841f77d9eeb29f">sd_ble_gatts_sys_attr_get</a>. This call is only allowed for active connections, and is usually made immediately after a connection is established with an known bonded device, often as a response to a <a class="el" href="a01268.html#ggae537647902af1b05c1e32f12d6b401c7ae3776204f11a583e105aed0e477601da">BLE_GATTS_EVT_SYS_ATTR_MISSING</a>.</p>
<p>p_sysattrs may point directly to the application's stored copy of the system attributes obtained using <a class="el" href="a01271.html#ga4a44241bdcc7262603841f77d9eeb29f">sd_ble_gatts_sys_attr_get</a>. If the pointer is NULL, the system attribute info is initialized, assuming that the application does not have any previously saved system attribute data for this device.</p>
<dl class="section note"><dt>Note</dt><dd>The state of persistent system attributes is reset upon connection establishment and then remembered for its duration.</dd>
<dd>
If this call returns with an error code different from <a class="el" href="a01025.html#ga7e6367efeaac363d8cf024940b4ec123">NRF_SUCCESS</a>, the storage of persistent system attributes may have been completed only partially. This means that the state of the attribute table is undefined, and the application should either provide a new set of attributes using this same call or reset the SoftDevice to return to a known state.</dd>
<dd>
When the <a class="el" href="a01015.html#ga62a3396d4af600e7f397c6b5159d44d1">BLE_GATTS_SYS_ATTR_FLAG_SYS_SRVCS</a> is used with this function, only the system attributes included in system services will be modified. </dd>
<dd>
When the <a class="el" href="a01015.html#gadc1332e4e412b3e59a7d0a9038d5ac09">BLE_GATTS_SYS_ATTR_FLAG_USR_SRVCS</a> is used with this function, only the system attributes included in user services will be modified.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_sys_attr_data</td><td>Pointer to a saved copy of system attributes supplied to the stack, or NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Size of data pointed by p_sys_attr_data, in octets. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Optional additional flags, see <a class="el" href="a01015.html">System Attribute Flags</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Successfully set the system attribute information. </td></tr>
    <tr><td class="paramname"><a class="el" href="a00976.html#gabdc27cbc2ffac4a50640a0ce992c03af">BLE_ERROR_INVALID_CONN_HANDLE</a></td><td>Invalid Connection Handle. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gaf0aff2ba7864b34a36b4a96986e1851e" title="Invalid state, operation disallowed in this state.">NRF_ERROR_INVALID_STATE</a></td><td>Invalid Connection State. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gaca6d57e218563351e7abdbdebb049f69" title="Invalid Data.">NRF_ERROR_INVALID_DATA</a></td><td>Invalid data supplied, the data should be exactly the same as retrieved with <a class="el" href="a01271.html#ga4a44241bdcc7262603841f77d9eeb29f">sd_ble_gatts_sys_attr_get</a>. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7ef4d466b79b31c6325f8b7af5d4f75f" title="No Memory for operation.">NRF_ERROR_NO_MEM</a></td><td>Not enough memory to complete operation. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga5d2d8608f6d6a0329f58961a969e946e" title="Busy.">NRF_ERROR_BUSY</a></td><td>The stack is busy. Retry at later time. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gad95321e157e632e7ac3a77f3388cbdf7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sd_ble_gatts_value_get </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00321.html">ble_gatts_value_t</a> *&#160;</td>
          <td class="paramname"><em>p_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the value of a given attribute. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle. If the value does not belong to a system attribute then <a class="el" href="a01021.html#gacf227b9b101dbcf08eccbbaba54e48f5">BLE_CONN_HANDLE_INVALID</a> can be used. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>Attribute handle. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p_value</td><td>Attribute value information.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>If the attribute value is longer than the size of the supplied buffer, p_len will return the total attribute value length (excluding offset), and not the number of bytes actually returned in p_data. The application may use this information to allocate a suitable buffer size.</dd>
<dd>
When retrieving system attribute values with this function, the connection handle may refer to an already disconnected connection. Refer to the documentation of <a class="el" href="a01271.html#ga4a44241bdcc7262603841f77d9eeb29f">sd_ble_gatts_sys_attr_get</a> for further information.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Successfully retrieved the value of the attribute. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gabc562e4ddfe2f427666a3acdd0b469a3" title="Bad Memory Address.">NRF_ERROR_INVALID_ADDR</a></td><td>Invalid pointer supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga349d25ada15be023e0d507f45ada682c" title="Not found.">NRF_ERROR_NOT_FOUND</a></td><td>Attribute not found. </td></tr>
    <tr><td class="paramname"><a class="el" href="a00976.html#gabdc27cbc2ffac4a50640a0ce992c03af">BLE_ERROR_INVALID_CONN_HANDLE</a></td><td>Invalid connection handle supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01008.html#ga050988950fb5cfb9e64b1f91f8872b45">BLE_ERROR_GATTS_INVALID_ATTR_TYPE</a></td><td><a class="el" href="a01021.html#gacf227b9b101dbcf08eccbbaba54e48f5">BLE_CONN_HANDLE_INVALID</a> supplied on a system attribute. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga2760c51ea71853bd74e2e7e7117ef52a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sd_ble_gatts_value_set </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00321.html">ble_gatts_value_t</a> *&#160;</td>
          <td class="paramname"><em>p_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the value of a given attribute. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle. If the value does not belong to a system attribute then <a class="el" href="a01021.html#gacf227b9b101dbcf08eccbbaba54e48f5">BLE_CONN_HANDLE_INVALID</a> can be used. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>Attribute handle. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p_value</td><td>Attribute value information.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Values other than system attributes can be set at any time, regardless of wheter any active connections exist.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="a01025.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Successfully set the value of the attribute. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#gabc562e4ddfe2f427666a3acdd0b469a3" title="Bad Memory Address.">NRF_ERROR_INVALID_ADDR</a></td><td>Invalid pointer supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga0a5831cf5092e0dd43a01869676ee076" title="Invalid Parameter.">NRF_ERROR_INVALID_PARAM</a></td><td>Invalid parameter(s) supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga349d25ada15be023e0d507f45ada682c" title="Not found.">NRF_ERROR_NOT_FOUND</a></td><td>Attribute not found. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga85125dae5d7e9d4b9964acbc13f641b3" title="Forbidden Operation.">NRF_ERROR_FORBIDDEN</a></td><td>Forbidden handle supplied, certain attributes are not modifiable by the application. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01025.html#ga4c61f2b54667506e90cc296721b2e658" title="Data size exceeds limit.">NRF_ERROR_DATA_SIZE</a></td><td>Invalid data size(s) supplied, attribute lengths are restricted by <a class="el" href="a01009.html">Maximum attribute lengths</a>. </td></tr>
    <tr><td class="paramname"><a class="el" href="a00976.html#gabdc27cbc2ffac4a50640a0ce992c03af">BLE_ERROR_INVALID_CONN_HANDLE</a></td><td>Invalid connection handle supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="a01008.html#ga050988950fb5cfb9e64b1f91f8872b45">BLE_ERROR_GATTS_INVALID_ATTR_TYPE</a></td><td><a class="el" href="a01021.html#gacf227b9b101dbcf08eccbbaba54e48f5">BLE_CONN_HANDLE_INVALID</a> supplied on a system attribute. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu May 7 2015 14:37:13 for nRF51 SDK - S130 SoftDevice by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
